<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Biblioteca</title>
		<meta charset="utf-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1, shrink-to-fit=no"
		/>
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT"
			crossorigin="anonymous"
		/>
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
		/>

		<link
			rel="stylesheet"
			href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
		/>
		<link rel="stylesheet" href="/css/styles.css" />
	</head>

	<body>
		<header id="header"></header>
		<main>
			<div id="app" class="container">
				<h4 class="mt-5 h3">Lista de libros</h4>

				<br />
				<a href="/libro-create.html"
					><i class="bi bi-plus-circle new-icon"></i
				></a>
				<div v-if="error">
					<p>Lo sentimos, ha ocurrido un error.</p>
				</div>
				<div v-else>
					<section v-if="cargando">
						<div class="spinner-border"></div>
						<p>Cargando...</p>
					</section>

					<!-- boton para buscar -->
					<form
						class="form-inline my-2 my-lg-0 search-form mb-2 d-flex justify-content-center"
						v-on:submit.prevent="searchData"
					>
						<input
							class="form-control mr-sm-2"
							type="search"
							placeholder="Buscar"
							aria-label="Search"
							v-model="buscar"
							@input="searchData"
							@keyup="searchData"
						/>
					</form>

					<section v-else>
						<br />
						<div class="table-dark table-responsive">
							<table class="table table-hover">
								<thead class="thead-dark">
									<tr class="table-secondary">
										<th scope="col">Id</th>
										<th scope="col">Titulo</th>
										<th scope="col">Autor</th>
										<th scope="col">Año</th>
										<th scope="col">Género</th>
										<th scope="col">Editorial</th>
										<th scope="col">Disponibilidad</th>
										<th scope="col">Acciones</th>
									</tr>
								</thead>
								<tbody>
									<!-- Iterar sobre cada libro-->

									<tr
										class="m-4"
										v-for="libro in libros"
										v-bind:key:alt="libro.id"
									>
										<td scope="row">{{libro.id}}</td>
										<td>{{libro.titulo}}</td>
										<td>{{libro.autor}}</td>
										<td>{{libro.anio}}</td>
										<td>{{libro.genero}}</td>
										<td>{{libro.editorial}}</td>
										<td>{{libro.estado}}</td>
										<td>
											<!-- Botón para editar -->
											<a :href="'libro-update.html?id='+ libro.id">
												<i class="bi bi-pencil btn-update"></i>
											</a>

											<!-- Botón para eliminar -->
											<a class="btn-delete">
												<i
													class="bi bi-trash mx-4"
													v-on:click="eliminar(libro.id)"
												></i>
											</a>
										</td>
									</tr>
								</tbody>
							</table>
							<p
								v-if="libros.length === 0 && !mostrarTodos"
								class="text-center no-found"
							>
								No se ha encontrado ningún libro.
							</p>
						</div>
					</section>
				</div>
			</div>
		</main>

		<script
			src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
			integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
			crossorigin="anonymous"
		></script>
		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.min.js"
			integrity="sha384-7VPbUDkoPSGFnVtYi0QogXtr74QeVeeIs99Qfg5YCF+TidwNdjvaKZX19NZ/e6oz"
			crossorigin="anonymous"
		></script>
		<script src="/scripts/main.js"></script>
		<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
		<!--Enlace de VUE-->
		<script src="/scripts/biblioteca.js"></script>
	</body>
</html>
